{
  "version": 4,
  "terraform_version": "1.9.1",
  "serial": 49,
  "lineage": "5a98aa55-f8cd-97b0-bc15-fd9c461c2b7f",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "aws_cloudformation_stack",
      "name": "primary",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].active",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capabilities": null,
            "disable_rollback": false,
            "iam_role_arn": "",
            "id": "arn:aws:cloudformation:us-east-1:143794216648:stack/Primary/8c33b9a0-3c13-11ef-82bf-1269cc1c83c5",
            "name": "Primary",
            "notification_arns": null,
            "on_failure": null,
            "outputs": {
              "ApplicationSecurityGroup": "sg-09ee57c279cae9800",
              "DatabaseSecurityGroup": "sg-0f408845123dbb360",
              "PrivateSubnets": "subnet-03c073c6caee6b15c, subnet-07228bbf5ee42f792",
              "PublicSubnets": "subnet-0c6ce10f6e5bc4e88, subnet-0f929233dbec63d69",
              "VPC": "vpc-0fba669db67b37ed0"
            },
            "parameters": {
              "PrivateSubnet1CIDR": "10.5.20.0/24",
              "PrivateSubnet2CIDR": "10.5.21.0/24",
              "PublicSubnet1CIDR": "10.5.10.0/24",
              "PublicSubnet2CIDR": "10.5.11.0/24",
              "VpcCIDR": "10.5.0.0/16",
              "VpcName": "Primary"
            },
            "policy_body": null,
            "policy_url": null,
            "tags": null,
            "tags_all": {},
            "template_body": "Description:  Udacity - Design for Availability, Resilience, and Reliability\r\n\r\nParameters:\r\n  VpcName:\r\n    Description: A name that is prefixed to resource names\r\n    Type: String\r\n\r\n  VpcCIDR:\r\n    Description: Please enter the IP range (CIDR notation) for this VPC\r\n    Type: String\r\n    Default: 10.1.0.0/16\r\n\r\n  PublicSubnet1CIDR:\r\n    Description: Please enter the IP range (CIDR notation) for the public subnet in the first Availability Zone\r\n    Type: String\r\n    Default: 10.1.10.0/24\r\n\r\n  PublicSubnet2CIDR:\r\n    Description: Please enter the IP range (CIDR notation) for the public subnet in the second Availability Zone\r\n    Type: String\r\n    Default: 10.1.11.0/24\r\n\r\n  PrivateSubnet1CIDR:\r\n    Description: Please enter the IP range (CIDR notation) for the private subnet in the first Availability Zone\r\n    Type: String\r\n    Default: 10.1.20.0/24\r\n\r\n  PrivateSubnet2CIDR:\r\n    Description: Please enter the IP range (CIDR notation) for the private subnet in the second Availability Zone\r\n    Type: String\r\n    Default: 10.1.21.0/24\r\n\r\nMetadata:\r\n  AWS::CloudFormation::Interface:\r\n    ParameterGroups:\r\n      -\r\n        Label:\r\n          default: \"Information for the VPC\"\r\n        Parameters:\r\n          - VpcName\r\n          - VpcCIDR\r\n      -\r\n        Label:\r\n          default: \"Information for the VPCs subnets. Subnet network ranges MUST fall within the VPC CIDR block above\"\r\n        Parameters:\r\n          - PublicSubnet1CIDR\r\n          - PublicSubnet2CIDR\r\n          - PrivateSubnet1CIDR\r\n          - PrivateSubnet2CIDR\r\n\r\n    ParameterLabels:\r\n      VpcName:\r\n        default: \"VPC Name\"\r\n      VpcCIDR:\r\n        default: \"VPC CIDR block\"\r\n      PublicSubnet1CIDR:\r\n        default: \"Public Subnet 1\"\r\n      PublicSubnet2CIDR:\r\n        default: \"Public Subnet 2\"\r\n      PrivateSubnet1CIDR:\r\n        default: \"Private Subnet 1\"\r\n      PrivateSubnet2CIDR:\r\n        default: \"Private Subnet 2\"\r\n\r\nResources:\r\n  VPC:\r\n    Type: AWS::EC2::VPC\r\n    Properties:\r\n      CidrBlock: !Ref VpcCIDR\r\n      EnableDnsSupport: true\r\n      EnableDnsHostnames: true\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Ref VpcName\r\n\r\n  InternetGateway:\r\n    Type: AWS::EC2::InternetGateway\r\n    Properties:\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Ref VpcName\r\n\r\n  InternetGatewayAttachment:\r\n    Type: AWS::EC2::VPCGatewayAttachment\r\n    Properties:\r\n      InternetGatewayId: !Ref InternetGateway\r\n      VpcId: !Ref VPC\r\n\r\n  PublicSubnet1:\r\n    Type: AWS::EC2::Subnet\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      AvailabilityZone: !Select [ 0, !GetAZs '' ]\r\n      CidrBlock: !Ref PublicSubnet1CIDR\r\n      MapPublicIpOnLaunch: true\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub\r\n            - ${VpcName} Public Subnet (${AZ1})\r\n            - { AZ1: !Select [ 0, !GetAZs  '' ] }\r\n  PublicSubnet2:\r\n    Type: AWS::EC2::Subnet\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      AvailabilityZone: !Select [ 1, !GetAZs  '' ]\r\n      CidrBlock: !Ref PublicSubnet2CIDR\r\n      MapPublicIpOnLaunch: true\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub\r\n            - ${VpcName} Public Subnet (${AZ2})\r\n            - { AZ2: !Select [ 1, !GetAZs  '' ] }\r\n  PrivateSubnet1:\r\n    Type: AWS::EC2::Subnet\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      AvailabilityZone: !Select [ 0, !GetAZs  '' ]\r\n      CidrBlock: !Ref PrivateSubnet1CIDR\r\n      MapPublicIpOnLaunch: false\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub\r\n            - ${VpcName} Private Subnet (${AZ1})\r\n            - { AZ1: !Select [ 0, !GetAZs  '' ] }\r\n  PrivateSubnet2:\r\n    Type: AWS::EC2::Subnet\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      AvailabilityZone: !Select [ 1, !GetAZs  '' ]\r\n      CidrBlock: !Ref PrivateSubnet2CIDR\r\n      MapPublicIpOnLaunch: false\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub\r\n            - ${VpcName} Private Subnet (${AZ2})\r\n            - { AZ2: !Select [ 1, !GetAZs  '' ] }\r\n\r\n  PublicRouteTable:\r\n    Type: AWS::EC2::RouteTable\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub ${VpcName} Public Routes\r\n\r\n  DefaultPublicRoute:\r\n    Type: AWS::EC2::Route\r\n    DependsOn: InternetGatewayAttachment\r\n    Properties:\r\n      RouteTableId: !Ref PublicRouteTable\r\n      DestinationCidrBlock: 0.0.0.0/0\r\n      GatewayId: !Ref InternetGateway\r\n\r\n  PublicSubnet1RouteTableAssociation:\r\n    Type: AWS::EC2::SubnetRouteTableAssociation\r\n    Properties:\r\n      RouteTableId: !Ref PublicRouteTable\r\n      SubnetId: !Ref PublicSubnet1\r\n\r\n  PublicSubnet2RouteTableAssociation:\r\n    Type: AWS::EC2::SubnetRouteTableAssociation\r\n    Properties:\r\n      RouteTableId: !Ref PublicRouteTable\r\n      SubnetId: !Ref PublicSubnet2\r\n\r\n  PrivateRouteTable:\r\n    Type: AWS::EC2::RouteTable\r\n    Properties:\r\n      VpcId: !Ref VPC\r\n      Tags:\r\n        - Key: Name\r\n          Value: !Sub ${VpcName} Private Routes\r\n\r\n  DatabaseSecurityGroup:\r\n    Type: AWS::EC2::SecurityGroup\r\n    Properties:\r\n      GroupDescription: Udacity ARR Project - Database Security Group\r\n      GroupName: UDARR-Database\r\n      SecurityGroupIngress:\r\n        -   Description: Application EC2 instances\r\n            FromPort: 3306\r\n            IpProtocol: tcp\r\n            SourceSecurityGroupId: !Ref ApplicationSecurityGroup\r\n            ToPort: 3306\r\n      VpcId: !Ref VPC\r\n      Tags:\r\n        - Key: Name\r\n          Value: UDARR-Database\r\n\r\n  ApplicationSecurityGroup:\r\n    Type: AWS::EC2::SecurityGroup\r\n    Properties:\r\n      GroupDescription: Udacity ARR Project - Application Security Group\r\n      GroupName: UDARR-Application\r\n      SecurityGroupIngress:\r\n        -   Description: SSH from the Internet\r\n            FromPort: 22\r\n            IpProtocol: tcp\r\n            CidrIp: 0.0.0.0/0\r\n            ToPort: 22\r\n      VpcId: !Ref VPC\r\n      Tags:\r\n        - Key: Name\r\n          Value: UDARR-Application\r\n\r\nOutputs:\r\n  VPC:\r\n    Description: VPC ID\r\n    Value: !Ref VPC\r\n\r\n  PublicSubnets:\r\n    Description: A list of the public subnets\r\n    Value: !Join [ \", \", [ !Ref PublicSubnet1, !Ref PublicSubnet2 ]]\r\n\r\n  PrivateSubnets:\r\n    Description: A list of the private subnets\r\n    Value: !Join [ \", \", [ !Ref PrivateSubnet1, !Ref PrivateSubnet2 ]]\r\n\r\n  DatabaseSecurityGroup:\r\n    Description: ID of the database security group\r\n    Value: !Ref DatabaseSecurityGroup\r\n\r\n  ApplicationSecurityGroup:\r\n    Description: ID of the EC2 instance security group\r\n    Value: !Ref ApplicationSecurityGroup\r\n",
            "template_url": null,
            "timeout_in_minutes": 0,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19"
        }
      ]
    }
  ],
  "check_results": null
}
